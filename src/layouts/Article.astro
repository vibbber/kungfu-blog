---
import Base from './Base.astro';
import type { Article } from '../data/articles';

interface Props {
  article: Article;
}

const { article } = Astro.props;
const fullTitle = `${article.title} | Kung Fu Family`;

// JSON-LD structured data
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": article.title,
  "description": article.description,
  "image": new URL(article.image, Astro.site).href,
  "datePublished": article.datePublished,
  "dateModified": article.dateModified,
  "author": {
    "@type": "Organization",
    "name": "Kung Fu Family"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kung Fu Family",
    "url": "https://kungfu.family"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": new URL(`/${article.slug}`, Astro.site).href
  }
};
---

<Base
  title={fullTitle}
  description={article.description}
  ogImage={article.image}
  canonicalPath={`/${article.slug}`}
  ogType="article"
>
  <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

  <!-- Header -->
  <header class="site-header">
    <a href="/" class="logo">Kung Fu <span>Family</span></a>
  </header>

  <slot />

  <style>
    .site-header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(250, 250, 248, 0.97);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 14px 24px;
    }

    .logo {
      font-family: 'DM Serif Display', serif;
      font-size: 1.4rem;
      color: var(--accent);
    }

    .logo span {
      color: var(--text);
    }
  </style>
</Base>
